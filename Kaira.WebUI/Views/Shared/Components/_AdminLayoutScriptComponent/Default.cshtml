@*
    Admin Layout Script Comnponent
*@

<script src="/Spike-Bootstrap-1.0.0/src/assets/libs/jquery/dist/jquery.min.js"></script>


<script src="/Spike-Bootstrap-1.0.0/src/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>


<script src="/Spike-Bootstrap-1.0.0/src/assets/libs/apexcharts/dist/apexcharts.min.js"></script>


<script src="/Spike-Bootstrap-1.0.0/src/assets/js/sidebarmenu.js"></script>
<script src="/Spike-Bootstrap-1.0.0/src/assets/js/app.min.js"></script>
<script src="/Spike-Bootstrap-1.0.0/src/assets/libs/simplebar/dist/simplebar.js"></script>
<script src="/Spike-Bootstrap-1.0.0/src/assets/js/dashboard.js"></script>


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>




<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
}


<script>
    function confirmDelete(urlWithId) {
        Swal.fire({
            title: "Silmek istediğinizden emin misiniz?",
            text: "Bu işlem geri alınamaz!",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Evet, Sil!",
            cancelButtonText: "İptal"
        }).then((result) => {
            if (result.isConfirmed) {
                window.location.href = urlWithId;
            }
        });
    }
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {

        const generateBtn = document.getElementById("generateBtn");
        const micBtn = document.getElementById("micBtn");
        const promptInput = document.getElementById("promptInput");
        const resultArea = document.getElementById("resultArea");
        const listeningInfo = document.getElementById("listeningInfo");

      
        generateBtn.addEventListener("click", function () {

            const prompt = promptInput.value;

            if (!prompt) {
                alert("Lütfen bir istek giriniz.");
                return;
            }

            resultArea.style.display = "block";
            resultArea.innerHTML = "🤖 AI düşünüyor...";

            fetch("/Admin/AI/GenerateStyle", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                body: "prompt=" + encodeURIComponent(prompt)
            })
            .then(res => res.text())
               .then(data => {
        resultArea.innerHTML = data.replace(/\n/g, "<br>");

        const cleanSpeechText = data.replace(/^\d+\.\s*/gm, "");

        speakText(cleanSpeechText);
    })
            .catch(() => {
                resultArea.innerHTML = "Bir hata oluştu.";
            });
        });

     
        const SpeechRecognition =
            window.SpeechRecognition || window.webkitSpeechRecognition;

        if (!SpeechRecognition) {
            micBtn.disabled = true;
            listeningInfo.innerText = "Tarayıcı sesli girişi desteklemiyor.";
            return;
        }

        const recognition = new SpeechRecognition();
        recognition.lang = "tr-TR";
        recognition.continuous = false;
        recognition.interimResults = false;

        micBtn.addEventListener("click", () => {
            micBtn.disabled = true;
            listeningInfo.innerText = "🎧 Dinleniyor...";
            recognition.start();
        });

        recognition.onresult = (event) => {
            const text = event.results[0][0].transcript;
            promptInput.value = text;
            listeningInfo.innerText = "✅ Metne çevrildi";
        };

        recognition.onerror = () => {
            listeningInfo.innerText = "❌ Ses algılanamadı";
        };

        recognition.onend = () => {
            micBtn.disabled = false;
            setTimeout(() => listeningInfo.innerText = "", 1500);
        };


          function speakText(text) {
        if (!window.speechSynthesis) return;

        const indicator = document.getElementById("speakingIndicator");

        window.speechSynthesis.cancel();

        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = "tr-TR";
        utterance.rate = 1;
        utterance.pitch = 1;

     
        utterance.onstart = () => {
            indicator.style.display = "block";
        };

     
        utterance.onend = () => {
            indicator.style.display = "none";
        };

   
        utterance.onerror = () => {
            indicator.style.display = "none";
        };

        window.speechSynthesis.speak(utterance);
    }


    });
</script>



